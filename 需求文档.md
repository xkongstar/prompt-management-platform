
# **AI提示词管理平台 产品需求文档 (PRD)**

| 文档版本 | 状态 | 创建日期 | 作者 |
| :--- | :--- | :--- | :--- |
| **v1.2 (单体极速冲刺版)** | **基线** | 2025年9月9日 | Gemini |

## 1\. 项目概述

### 1.1 产品愿景

打造一款现代化、简洁高效的AI提示词（Prompt）管理工具，帮助开发者、创作者和AI重度用户在一个统一的平台中收集、管理、搜索和使用他们的提示词资产，从而提升工作流效率。

### 1.2 目标用户

  * **AI应用开发者/提示词工程师**: 需要系统化管理和迭代大量用于开发和调试的提示词。
  * **内容创作者/设计师**: 使用MidJourney, Stable Diffusion等工具，需要管理和优化复杂的图像生成提示词。
  * **高频AI工具使用者**: 在日常工作（如写作、分析、编程）中频繁使用ChatGPT, Claude等工具，希望将高质量提示词沉淀下来。

### 1.3 核心问题

当前，用户的提示词分散存储于笔记应用、代码片段、聊天记录或电子表格中，存在以下痛点：

  * **存储混乱**: 难以归类和组织。
  * **搜索低效**: 无法快速找到特定场景下的最佳提示词。
  * **使用不便**: 在不同AI工具间切换时，复制粘贴流程繁琐。

### 1.4 MVP 核心理念

本项目MVP阶段将严格遵循 **“单体极速冲刺”** 理念，一切决策都为速度服务，旨在用最短时间（1-2周）上线一个能验证核心价值的产品。

  * **一个代码库**: 前后端逻辑统一在Next.js项目中开发。
  * **一个服务器**: 整个应用部署在单个云服务器实例上。
  * **一个数据库文件**: 使用SQLite作为生产数据库，简化运维。
  * **一个核心功能闭环**: 聚焦于“保存 → 查找 → 使用”这一最核心的用户流程。

## 2\. 功能需求 (Functional Requirements)

### 2.1 用户认证 (User Authentication)

  * **US-101: 用户登录**:
      * 用户应能通过点击“使用GitHub登录”按钮来授权登录应用。
      * 系统应只支持GitHub作为唯一的OAuth提供商。
      * 成功登录后，用户应被重定向到应用的主界面（提示词列表页）。
  * **US-102: 用户登出**:
      * 用户应能在应用内找到一个明确的“登出”按钮。
      * 点击后，用户的会话（Session）应被清除，并返回到登录页面。
  * **US-103: 认证状态保持**:
      * 已登录用户在关闭并重新打开浏览器后，应保持登录状态。

### 2.2 提示词管理 (Prompt Management - CRUD)

  * **US-201: 创建提示词**:
      * 用户应能访问一个“创建新提示词”的表单页面。
      * 表单应包含以下必填/可选字段：
          * **标题 (Title)**: `[必填]` 纯文本输入框。
          * **内容 (Content)**: `[必填]` 多行文本域 (`<textarea>`)，用于存放提示词主体。
          * **标签 (Tags)**: `[可选]` 纯文本输入框，用户可输入多个标签，并用逗号或空格分隔（例如："编程, Python, API"）。
  * **US-202: 查看提示词列表**:
      * 登录后，用户应能看到一个按创建时间倒序排列的个人提示词列表。
      * 列表中的每一项应清晰地展示提示词的【标题】和【标签】。
  * **US-203: 查看/编辑提示词**:
      * 用户点击列表中的任意提示词，可以进入其详情/编辑页面，表单内容与创建时一致。
      * 用户可以修改表单中的任何信息并保存更新。
  * **US-204: 删除提示词**:
      * 用户在提示词列表或编辑页面应能找到“删除”按钮。
      * 为防止误操作，删除前应有二次确认弹窗（例如：“您确定要删除这个提示词吗？”）。
  * **US-205: 一键复制提示词**:
      * 在提示词列表的每一项旁边或详情页中，应有一个“复制”按钮。
      * 点击后，系统应将该提示词的【内容】完整复制到用户的剪贴板，并给出清晰的成功提示（例如：“已复制！”）。

### 2.3 搜索功能 (Search Functionality)

  * **US-301: 全局搜索**:
      * 在应用主界面的显著位置（如导航栏），应有一个全局搜索框。
      * 用户输入关键词后，系统应实时或在用户按下回车后，对当前用户的所有提示词进行检索。
      * 检索范围应覆盖【标题】、【内容】和【标签】三个字段。
      * 搜索结果应以列表形式动态更新展示。

## 3\. 非功能性需求 (Non-Functional Requirements)

  * **性能**: 页面主要内容的加载时间 (LCP) 应小于2.5秒。API响应时间应小于500毫秒。
  * **用户体验**: 界面设计应简洁、直观。支持响应式布局，在桌面和主流移动设备浏览器上均有良好体验。
  * **可靠性**: 应用应保证99%以上的正常运行时间。数据库应配置每日自动备份（通过Litestream实现）。
  * **安全性**: 应用应能抵御常见的Web攻击（如XSS、CSRF），框架和库应及时更新以修复安全漏洞。用户数据传输必须使用HTTPS。

## 4\. 技术栈与架构

### 4.1 技术选型

| 类别 | 技术 | 理由 |
| :--- | :--- | :--- |
| **全栈框架** | Next.js 15+ (App Router) | 在单一代码库中统一处理前后端逻辑，实现极致的开发效率。 |
| **UI 库** | Shadcn/UI & Tailwind CSS | 提供大量预制组件，通过复制粘贴即可快速构建美观、一致的界面。 |
| **数据库** | SQLite | 零配置，易于管理和备份，性能完全满足MVP需求，极大降低运维复杂性。 |
| **ORM** | Prisma | 提供类型安全的数据库访问，与TypeScript和Next.js完美集成。 |
| **认证** | Auth.js (NextAuth v5) | 专为Next.js设计，集成社交登录（如GitHub）极为简单。 |

### 4.2 架构设计

本应用采用**单体（Monolithic）架构**。

  * 单个Next.js应用进程同时负责：
      * **前端渲染**: 使用React Server Components渲染页面。
      * **API服务**: 在 `/api/*` 路径下提供RESTful API接口供前端调用。
      * **静态资源服务**: 处理JS、CSS、图片等静态文件。
  * Prisma作为数据访问层，直接与本地的SQLite数据库文件 (`database.db`) 进行交互。

### 4.3 数据模型 (Prisma Schema)

```prisma
// file: prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./database.db"
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?
  accounts      Account[]
  sessions      Session[]
  prompts       Prompt[]
}

model Prompt {
  id        String   @id @default(cuid())
  title     String
  content   String   @db.Text
  tags      String?  // 存储逗号分隔的字符串，例如 "AI, 写作, 营销"

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  userId    String
  author    User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

// --- Auth.js Required Models ---
model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String? @db.Text
  access_token      String? @db.Text
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.Text
  session_state     String?
  user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}
```

## 5\. MVP 范围定义

### 5.1 范围内功能 (In-Scope)

  * [x] 基于GitHub的单点登录系统。
  * [x] 提示词的创建、读取、更新、删除 (CRUD)。
  * [x] 基于文本的标签系统（逗号分隔）。
  * [x] 一键复制提示词内容到剪贴板。
  * [x] 覆盖标题、内容、标签的全局搜索功能。
  * [x] 简洁的响应式Web界面。

### 5.2 范围外功能 (Out-of-Scope for MVP)

  * [ ] 邮箱/密码注册登录。
  * [ ] 团队协作、共享空间。
  * [ ] 提示词版本控制。
  * [ ] 导入/导出功能 (JSON, Markdown等)。
  * [ ] 复杂的层级分类系统。
  * [ ] 任何形式的使用统计、评分、推荐系统。
  * [ ] 富文本或Markdown编辑器。
  * [ ] 公开社区或模板市场。

## 6\. 实施与部署计划

### 6.1 开发冲刺计划 (1-2周)

  * **阶段一: 基础搭建 (2-3天)**
      * 初始化Next.js项目，集成Prisma和SQLite。
      * 完成Auth.js配置，实现GitHub登录/登出流程。
      * 完成数据库模型设计并生成。
  * **阶段二: 核心功能开发 (3-4天)**
      * 构建提示词CRUD的后端API路由。
      * 使用Shadcn/UI开发前端的列表页和创建/编辑表单。
      * 实现前后端数据联调，完成核心功能闭环。
  * **阶段三: 辅助功能与打磨 (2-3天)**
      * 实现全局搜索功能。
      * 完善UI细节、交互反馈和响应式布局。
      * 进行全面的功能测试和Bug修复。
  * **阶段四: 部署 (1-2天)**
      * 编写Dockerfile。
      * （可选）配置Litestream进行数据库备份。
      * 在目标云服务器（如DigitalOcean, Linode, Fly.io）上部署应用。
      * 配置域名和HTTPS。

### 6.2 部署策略

  * **服务器**: 单个低成本云服务器 (VPS)，1核CPU/1GB内存即可满足初期需求。
  * **部署方式**: 使用Docker将整个Next.js应用容器化，实现环境一致性和快速部署。
  * **数据库**: SQLite数据库文件与应用代码一同存放于服务器。使用Litestream将数据库变更实时复制到S3兼容的对象存储服务（如Backblaze B2, Cloudflare R2）以实现灾难恢复。

## 7\. 成功指标

MVP上线后的首要目标是验证产品核心价值。

  * **用户激活**: 1个月内，实现 **100个** 真实用户注册。
  * **用户留存**: 注册用户中，有 **30%** 的用户在首周后仍有访问。
  * **核心功能使用**: 平台累计创建的提示词总数超过 **500条**。
